<form id="search-form" class="search">
  <input
    type="text"
    class="search__input"
    id="search-input"
    placeholder="search for projects"
    name="search"
  />
  <svg class="search__icon">
    <use
      xlink:href="/assets/fontawesome-free-6.4.2/sprites/solid.svg#magnifying-glass"
    ></use>
  </svg>
</form>

<script>
  const formElement = document.querySelector('#search-form') as HTMLFormElement;

  formElement.addEventListener('submit', e => {
    e.preventDefault();
    if (!e.target) return;

    const searchQuery = (e.target as HTMLElement).querySelector(
      '#search-input',
    ) as HTMLInputElement;
    if (!searchQuery.value) return;

    console.log(`searching for ${searchQuery.value}`);
  });
</script>

<style lang="scss">
  @use '@styles/mixins' as *;

  .search {
    flex: 0 0 30%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    position: relative;

    @include respond(phone) {
      display: none;
    }

    &__icon {
      width: 2rem;
      height: 2rem;
      fill: var(--color-gray);
      position: absolute;
      z-index: 1;
      transition: all 0.2s;
      transform: translateX(3rem);
    }

    &__input {
      align-self: center;
      width: 90%;
      border: none;
      border-radius: 1rem;
      background-color: var(--background-color-search);

      padding: 1.5rem 2rem 1.5rem 4.5rem;

      font-family: inherit;
      font-size: 1.6rem;

      transition: all 0.2s;

      &:focus {
        outline: none;
        width: 100%;
      }

      &::placeholder {
        color: var(--color-light);
        font-weight: 300;
      }
    }

    &__input:focus + &__icon {
      transform: translateX(1.5rem);
    }
  }
</style>
